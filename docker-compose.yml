version: "3.9"
services:

  Job:
    container_name: job-ms-compose
    build: .\job-service
    ports:
      - "8099:8092"
    environment:
      - spring.datasource.url=jdbc:h2:mem:test
      - spring.datasource.username=sa
      - spring.datasource.password=password
      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://serviceregistry:8761/eureka/


    image: "job-ms-dock"
    restart: unless-stopped
    depends_on:
      - Eureka

  Event:
    container_name: event
    image: "event"
    build: .\event-service
    ports:
      - "8091:8091"
    environment:
      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://serviceregistry:8761/eureka/
    depends_on:
      - "Eureka"

  Eureka:
    container_name: eureka
    build: .\eureka-server-service
    hostname: eureka
    ports:
      - "8762:8761"
    image: "eureka"
    environment:
      - eureka.client.serviceUrl.defaultZone=http://eureka:8761/eureka/
    networks:
      - mynetwork


  db-mysql:
    image: "mysql:5.6"
    container_name: db-mysql
    environment:
      - MYSQL_ROOT_PASSWORD=root
    ports:
      - "3307:3306"
    restart: unless-stopped
    networks:
      - mynetwork

networks:
  mynetwork:
